<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Parking Management{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700&display=swap");
      body {
        font-family: "Noto Sans Thai", sans-serif;
      }

      /* Smooth transitions */
      .nav-link {
        transition: all 0.3s ease;
      }

      /* Mobile menu animation */
      .mobile-menu {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out;
      }

      .mobile-menu.active {
        max-height: 500px;
      }
    </style>
  </head>
  <body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
          <!-- Logo -->
          <div class="flex items-center">
            <a href="{% url 'home' %}" class="flex items-center space-x-2">
              <span class="text-2xl sm:text-3xl">ğŸš—</span>
              <span
                class="text-lg sm:text-xl font-bold text-indigo-600 truncate max-w-[150px] sm:max-w-none"
              >
                Parking Management
              </span>
            </a>
          </div>

          <!-- Desktop Navigation -->
          <div class="hidden lg:flex items-center space-x-2 xl:space-x-4">
            {% if user.is_authenticated %}
            <a
              href="{% url 'home' %}"
              class="nav-link text-gray-700 hover:text-indigo-600 hover:bg-indigo-50 px-3 py-2 rounded-md text-sm font-medium"
            >
              ğŸ  Home
            </a>
            <a
              href="{% url 'my_cars' %}"
              class="nav-link text-gray-700 hover:text-indigo-600 hover:bg-indigo-50 px-3 py-2 rounded-md text-sm font-medium"
            >
              ğŸš— My Cars
            </a>
            <a
              href="{% url 'create_booking' %}"
              class="nav-link text-gray-700 hover:text-indigo-600 hover:bg-indigo-50 px-3 py-2 rounded-md text-sm font-medium"
            >
              â• Create Booking
            </a>
            <a
              href="{% url 'my_bookings' %}"
              class="nav-link text-gray-700 hover:text-indigo-600 hover:bg-indigo-50 px-3 py-2 rounded-md text-sm font-medium"
            >
              ğŸ“‹ My Bookings    
            </a>
            {% if user.is_staff %}
            <a
              href="{% url 'admin_dashboard' %}"
              class="nav-link bg-indigo-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-indigo-700"
            >
              ğŸ‘¨â€ğŸ’¼ Admin
            </a>
            {% endif %}
            <div class="flex items-center space-x-2 border-l pl-4">
              <span class="text-gray-700 text-sm">ğŸ‘¤ {{ user.username }}</span>
              <a
                href="{% url 'logout' %}"
                class="nav-link text-red-600 hover:text-red-700 hover:bg-red-50 px-3 py-2 rounded-md text-sm font-medium"
              >
                ğŸšª Logout
              </a>
            </div>
            {% else %}
            <a
              href="{% url 'home' %}"
              class="nav-link text-gray-700 hover:text-indigo-600 hover:bg-indigo-50 px-3 py-2 rounded-md text-sm font-medium"
            >
              ğŸ  Home
            </a>
            <a
              href="{% url 'login' %}"
              class="nav-link text-gray-700 hover:text-indigo-600 hover:bg-indigo-50 px-3 py-2 rounded-md text-sm font-medium"
            >
              ğŸ” Login
            </a>
            <a
              href="{% url 'register' %}"
              class="nav-link bg-indigo-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-indigo-700"
            >
              âœ¨ Register
            </a>
            {% endif %}
          </div>

          <!-- Mobile Menu Button -->
          <div class="flex items-center lg:hidden">
            <button
              id="mobile-menu-button"
              type="button"
              class="inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-indigo-600 hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500"
              aria-expanded="false"
            >
              <span class="sr-only">Open main menu</span>
              <!-- Hamburger icon -->
              <svg
                class="block h-6 w-6"
                id="menu-open-icon"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                />
              </svg>
              <!-- Close icon -->
              <svg
                class="hidden h-6 w-6"
                id="menu-close-icon"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12"
                />
              </svg>
            </button>
          </div>
        </div>

        <!-- Mobile Menu -->
        <div class="mobile-menu lg:hidden" id="mobile-menu">
          <div class="px-2 pt-2 pb-3 space-y-1">
            {% if user.is_authenticated %}
            <!-- User Info -->
            <div
              class="px-3 py-2 text-sm font-medium text-gray-700 bg-gray-50 rounded-md mb-2"
            >
              ğŸ‘¤ {{ user.username }}
            </div>

            <a
              href="{% url 'home' %}"
              class="nav-link block text-gray-700 hover:text-indigo-600 hover:bg-indigo-50 px-3 py-2 rounded-md text-base font-medium"
            >
              ğŸ  Home
            </a>
            <a
              href="{% url 'my_cars' %}"
              class="nav-link block text-gray-700 hover:text-indigo-600 hover:bg-indigo-50 px-3 py-2 rounded-md text-base font-medium"
            >
              ğŸš— My Cars
            </a>
            <a
              href="{% url 'create_booking' %}"
              class="nav-link block text-gray-700 hover:text-indigo-600 hover:bg-indigo-50 px-3 py-2 rounded-md text-base font-medium"
            >
              â• Create Booking
            </a>
            <a
              href="{% url 'my_bookings' %}"
              class="nav-link block text-gray-700 hover:text-indigo-600 hover:bg-indigo-50 px-3 py-2 rounded-md text-base font-medium"
            >
              ğŸ“‹ My Bookings
            </a>
            {% if user.is_staff %}
            <a
              href="{% url 'admin_dashboard' %}"
              class="nav-link block bg-indigo-600 text-white px-3 py-2 rounded-md text-base font-medium hover:bg-indigo-700"
            >
              ğŸ‘¨â€ğŸ’¼ Admin Dashboard
            </a>
            {% endif %}
            <a
              href="{% url 'logout' %}"
              class="nav-link block text-red-600 hover:text-red-700 hover:bg-red-50 px-3 py-2 rounded-md text-base font-medium mt-2 border-t pt-3"
            >
              ğŸšª Logout
            </a>
            {% else %}
            <a
              href="{% url 'home' %}"
              class="nav-link block text-gray-700 hover:text-indigo-600 hover:bg-indigo-50 px-3 py-2 rounded-md text-base font-medium"
            >
              ğŸ  Home
            </a>
            <a
              href="{% url 'login' %}"
              class="nav-link block text-gray-700 hover:text-indigo-600 hover:bg-indigo-50 px-3 py-2 rounded-md text-base font-medium"
            >
              ğŸ” Login
            </a>
            <a
              href="{% url 'register' %}"
              class="nav-link block bg-indigo-600 text-white px-3 py-2 rounded-md text-base font-medium hover:bg-indigo-700"
            >
              âœ¨ Register
            </a>
            {% endif %}
          </div>
        </div>
      </div>
    </nav>

    <!-- Messages -->
    {% if messages %}
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4">
      {% for message in messages %}
      <div
        class="{% if message.tags == 'success' %}bg-green-100 border-green-500 text-green-800{% elif message.tags == 'error' %}bg-red-100 border-red-500 text-red-800{% else %}bg-yellow-100 border-yellow-500 text-yellow-800{% endif %} border-l-4 p-3 sm:p-4 rounded-md mb-4 shadow-md text-sm sm:text-base"
      >
        <div class="flex items-start">
          <div class="flex-1">{{ message }}</div>
        </div>
      </div>
      {% endfor %}
    </div>
    {% endif %}

    <!-- Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8">
      {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-white mt-12 sm:mt-16 py-6 border-t">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center text-gray-600 text-sm sm:text-base">
          <p class="mb-2">ğŸš— Parking Management System</p>
          <p class="text-xs sm:text-sm text-gray-500">
            &copy; 2025 | Seksan168
          </p>
        </div>
      </div>
    </footer>

    <!-- Mobile Menu Toggle Script -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const menuButton = document.getElementById("mobile-menu-button");
        const mobileMenu = document.getElementById("mobile-menu");
        const menuOpenIcon = document.getElementById("menu-open-icon");
        const menuCloseIcon = document.getElementById("menu-close-icon");

        if (menuButton && mobileMenu) {
          menuButton.addEventListener("click", function () {
            const isExpanded =
              menuButton.getAttribute("aria-expanded") === "true";

            menuButton.setAttribute("aria-expanded", !isExpanded);
            mobileMenu.classList.toggle("active");

            // Toggle icons
            menuOpenIcon.classList.toggle("hidden");
            menuOpenIcon.classList.toggle("block");
            menuCloseIcon.classList.toggle("hidden");
            menuCloseIcon.classList.toggle("block");
          });

          // Close menu when clicking outside
          document.addEventListener("click", function (event) {
            const isClickInside =
              menuButton.contains(event.target) ||
              mobileMenu.contains(event.target);

            if (!isClickInside && mobileMenu.classList.contains("active")) {
              menuButton.setAttribute("aria-expanded", "false");
              mobileMenu.classList.remove("active");
              menuOpenIcon.classList.remove("hidden");
              menuOpenIcon.classList.add("block");
              menuCloseIcon.classList.add("hidden");
              menuCloseIcon.classList.remove("block");
            }
          });

          // Close menu when clicking on a link
          const mobileMenuLinks = mobileMenu.querySelectorAll("a");
          mobileMenuLinks.forEach((link) => {
            link.addEventListener("click", function () {
              menuButton.setAttribute("aria-expanded", "false");
              mobileMenu.classList.remove("active");
              menuOpenIcon.classList.remove("hidden");
              menuOpenIcon.classList.add("block");
              menuCloseIcon.classList.add("hidden");
              menuCloseIcon.classList.remove("block");
            });
          });
        }
      });
    </script>
  </body>
</html>
